"use strict";var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,r,a){if(r)e(t.prototype,r);if(a)e(t,a);return t}}();var _react=require("react");var _react2=_interopRequireDefault(_react);var _reactRouter=require("react-router");var _exenv=require("exenv");var _exenv2=_interopRequireDefault(_exenv);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _inherits(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var Breadcrumbs=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.displayName="Breadcrumbs";return e}_createClass(t,[{key:"_getDisplayName",value:function r(e){console.log("Getdisplayname",e);var t=null;if(typeof e.getDisplayName==="function"){console.log("Getdisplayname function called");t=e.getDisplayName()}if(e.indexRoute){console.log("indexroute!");t=t||e.indexRoute.displayName||null;console.log("indexroute! after",t)}else{console.log("NON indexroute! after",t);t=t||e.displayName||null;console.log("after NON indexroute! after",t)}if(!t&&!!e.name){console.log("noname but has route name");t=e.name}if(!t&&this.props.displayMissing){console.log("has props display missing");t=this.props.displayMissingText}return t}},{key:"_resolveRouteName",value:function a(e){console.log("Resolve route name ");var t=this._getDisplayName(e);console.log("A1",t);if(!t&&e.breadcrumbName)t=e.breadcrumbName;console.log("A2",t);if(!t&&e.name)t=e.name;console.log("A3",t);return t}},{key:"_processRoute",value:function s(e,t,r,a,o){var p=this;if(!e.path&&this.props.hideNoPath)return null;var i="";var n="";var l="";var u=this._resolveRouteName(e);if(u&&"excludes"in this.props&&this.props.excludes.some(function(e){return e===u}))return null;var c=true;if(c){c=!!e.childRoutes;c=t!==r+1}i=t!==r+1?this.props.separator:"";if(!c)i="";if(e.hasOwnProperty("breadcrumblink")){c=e.breadcrumblink}if(this.props.params){n=Object.keys(this.props.params).map(function(e){l=e;return p.props.params[e]})}var f=e.path.split("/")[e.path.split("/").length-1];var m=void 0;e.path.split("/").map(function(t){if(t.substring(0,1)==":"){if(p.props.params){m=Object.keys(p.props.params).map(function(e){return p.props.params[e]});var r=e.path.split("/").map(function(e){if(e.substring(0,1)==":"){return m.shift()}else{return e}});e.path=r.reduce(function(e,t){return e+"/"+t});if(!e.staticName&&f.substring(0,1)==":")u=r.reduce(function(e,t){return t});if(typeof e.prettifyParam==="function"){u=e.prettifyParam(u)}}}});if(u){if(this.props.prettify){console.log("prettifying");u=u.replace(/-/g," ");u=u.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}var h=this.props.itemClass;var d=void 0;if(c){d=!o?u:_react2.default.createElement(_reactRouter.Link,{to:e.path},u)}else{d=u;h+=" "+this.props.activeItemClass}return!o?d:_react2.default.createElement(this.props.itemElement,{className:h,key:Math.random()*100},d,i)}return null}},{key:"_buildRoutes",value:function o(e,t){var r=this;var a=[];var s=e[1]&&e[1].hasOwnProperty("path");var o="/";var p=[];e.forEach(function(e,t){var a=Object.assign({},e);if(typeof e.prettifyParam==="function"){a.prettifyParam=e.prettifyParam}if("props"in a&&"path"in a.props){a.path=a.props.path;a.children=a.props.children;a.name=a.props.name;a.prettifyParam=a.props.prettifyParam}if(a.path){if(a.path.charAt(0)==="/"){o=a.path}else{if(o.charAt(o.length-1)!=="/"){o+="/"}o+=a.path}}if(0<t&&a.path&&a.path.charAt(0)!=="/"){a.path=o}var s=r._resolveRouteName(a);if((r.props.displayMissing||s)&&a.path&&!("excludes"in r.props&&r.props.excludes.some(function(e){return e===s})))p.push(a)});e=p;e.map(function(p,i){if(!p)return null;if("props"in p&&"path"in p.props){p.path=p.props.path;p.children=p.props.children;p.name=p.props.name}if(p.path){if(p.path.charAt(0)==="/"){o=p.path}else{if(o.charAt(o.length-1)!=="/"){o+="/"}o+=p.path}}if(0<i&&p.path&&p.path.charAt(0)!=="/"){p.path=o}var n=r._processRoute(p,e.length,a.length,s,t);if(n){a.push(n)}});if(_exenv2.default.canUseDOM){if(window&&window.document){if("setDocumentTitle"in this.props&&this.props.setDocumentTitle){window.document.title=a[a.length-1].props.children[0]}}}return!t?a:_react2.default.createElement(this.props.wrapperElement,{className:this.props.customClass||this.props.wrapperClass},a)}},{key:"render",value:function p(){return this._buildRoutes(this.props.routes,this.props.createElement)}}]);return t}(_react2.default.Component);Breadcrumbs.propTypes={separator:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.element,_react2.default.PropTypes.string]),createElement:_react2.default.PropTypes.bool,displayMissing:_react2.default.PropTypes.bool,prettify:_react2.default.PropTypes.bool,displayMissingText:_react2.default.PropTypes.string,displayName:_react2.default.PropTypes.string,breadcrumbName:_react2.default.PropTypes.string,wrapperElement:_react2.default.PropTypes.string,wrapperClass:_react2.default.PropTypes.string,itemElement:_react2.default.PropTypes.string,itemClass:_react2.default.PropTypes.string,customClass:_react2.default.PropTypes.string,activeItemClass:_react2.default.PropTypes.string,excludes:_react2.default.PropTypes.arrayOf(_react2.default.PropTypes.string),hideNoPath:_react2.default.PropTypes.bool,routes:_react2.default.PropTypes.arrayOf(_react2.default.PropTypes.object).isRequired,setDocumentTitle:_react2.default.PropTypes.bool};Breadcrumbs.defaultProps={separator:" > ",createElement:true,displayMissing:true,displayMissingText:"Missing name prop from Route",wrapperElement:"div",wrapperClass:"breadcrumbs",itemElement:"span",itemClass:"",activeItemClass:"",excludes:[""],prettify:false,hideNoPath:true,setDocumentTitle:false};Breadcrumbs.contextTypes={routes:_react2.default.PropTypes.array,params:_react2.default.PropTypes.array};module.exports=Breadcrumbs;
//# sourceMappingURL=dist/react-breadcrumbs.min.js.map